---
import { getChannels } from '../../data/channels.js';
import MainLayout from '../../layouts/MainLayout.astro';
import WatchContainer from '../../components/WatchContainer.jsx';

export async function getStaticPaths() {
  const channels = await getChannels();
  return channels.map(channel => ({
    params: { id: channel.id },
    props: { channel, allChannels: channels }
  }));
}

const { channel, allChannels } = Astro.props;
---

<MainLayout title={channel.name}>
	<WatchContainer initialChannel={channel} allChannels={allChannels} client:load />
</MainLayout>
