import{j as n}from"./createLucideIcon.FfGchd24.js";import{r as e}from"./index.Dt5TeE8z.js";import t from"./AnimeCard.BWH-1xIF.js";import{L as a}from"./loader-circle.Dc-rm31c.js";import"./play.DQi8FuBb.js";import"./tv.pBaZG7Q3.js";import"./star.BaMZbBQR.js";const i=async n=>{const e=`anime_v1_${n}`;if("undefined"!=typeof window)try{const n=localStorage.getItem(e);if(n){const{data:e,timestamp:t}=JSON.parse(n);if(Date.now()-t<6e5)return e}}catch(t){}try{const a=await fetch(`https://www.sankavollerei.com${n}`,{headers:{"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36",Accept:"application/json"}});if(!a.ok)throw new Error(`API Error: ${a.status}`);const i=await a.json();if("undefined"!=typeof window)try{localStorage.setItem(e,JSON.stringify({data:i,timestamp:Date.now()}))}catch(t){}return i}catch(a){return null}},r=n=>n?{id:n.slug||n.id||"",title:n.title||n.name||"Unknown",poster:n.poster||n.image||n.thumbnail||"https://via.placeholder.com/300x450?text=No+Image",episode:n.episode||n.episodes||n.latest_episode||"",rating:n.rating||n.score||0,status:n.status||"",type:n.type||"TV",genres:n.genres||[],synopsis:n.synopsis||n.description||"",...n}:null,s=async(n=1)=>{const e=await i(`/anime/ongoing-anime?page=${n}`);if(!e)return[];const t=e.data||e.ongoing||e||[];return Array.isArray(t)?t.map(r):[]},o=async(n=1)=>{const e=await i(`/anime/complete-anime?page=${n}`);if(!e)return[];const t=e.data||e.completed||e||[];return Array.isArray(t)?t.map(r):[]},m=({initialData:i,title:r,type:m})=>{const[l,c]=e.useState(i||[]),[d,p]=e.useState(1),[g,f]=e.useState(!1),[u,h]=e.useState(!0);return n.jsxs("section",{className:"anime-section",children:[n.jsx("div",{className:"section-header",children:n.jsx("h2",{className:"section-title",children:r})}),n.jsx("div",{className:"anime-grid",children:l.map((e,a)=>n.jsx(t,{anime:e},`${e.id||e.slug||a}-${d}`))}),u&&n.jsx("div",{className:"load-more-container",children:n.jsx("button",{className:"load-more-btn",onClick:async()=>{if(g)return;f(!0);const n=d+1;try{let e;"ongoing"===m?e=await s(n):"completed"===m&&(e=await o(n));const t=Array.isArray(e)?e:e?.data||[];0===t.length?h(!1):(c(n=>[...n,...t]),p(n))}catch(e){h(!1)}finally{f(!1)}},disabled:g,children:g?n.jsxs(n.Fragment,{children:[n.jsx(a,{size:18,className:"animate-spin"}),n.jsx("span",{children:"Memuat..."})]}):"Lihat Lebih Banyak"})}),n.jsx("style",{jsx:!0,children:"\n                .anime-section {\n                    margin-bottom: 3.5rem;\n                }\n                .section-header {\n                    margin-bottom: 2rem;\n                }\n                .section-title {\n                    font-family: 'Outfit', sans-serif;\n                    font-size: 1.75rem;\n                    font-weight: 700;\n                    color: white;\n                }\n                .anime-grid {\n                    display: grid;\n                    grid-template-columns: repeat(2, 1fr);\n                    gap: 1.5rem;\n                }\n                \n                @media (min-width: 768px) {\n                    .anime-grid {\n                        grid-template-columns: repeat(3, 1fr);\n                        gap: 2rem;\n                    }\n                }\n\n                @media (min-width: 1024px) {\n                    .anime-grid {\n                        grid-template-columns: repeat(4, 1fr);\n                        gap: 2.5rem;\n                    }\n                }\n\n                .load-more-container {\n                    display: flex;\n                    justify-content: center;\n                    margin-top: 4rem;\n                }\n                .load-more-btn {\n                    display: flex;\n                    align-items: center;\n                    gap: 0.75rem;\n                    background: rgba(99, 102, 241, 0.1);\n                    color: #a5b4fc;\n                    border: 1px solid rgba(99, 102, 241, 0.3);\n                    padding: 1rem 3rem;\n                    border-radius: 100px;\n                    font-weight: 700;\n                    font-family: 'Outfit', sans-serif;\n                    cursor: pointer;\n                    transition: all 0.3s ease;\n                }\n                .load-more-btn:hover:not(:disabled) {\n                    background: #6366f1;\n                    color: white;\n                    border-color: #6366f1;\n                    transform: translateY(-4px);\n                    box-shadow: 0 10px 20px rgba(99, 102, 241, 0.3);\n                }\n                .load-more-btn:disabled {\n                    opacity: 0.5;\n                    cursor: not-allowed;\n                }\n                .animate-spin {\n                    animation: spin 1s linear infinite;\n                }\n                @keyframes spin {\n                    from { transform: rotate(0deg); }\n                    to { transform: rotate(360deg); }\n                }\n\n                @media (max-width: 640px) {\n                   .section-title {\n                        font-size: 1.5rem;\n                    }\n                   .anime-grid {\n                       gap: 1rem;\n                   }\n                }\n            "})]})};export{m as default};
