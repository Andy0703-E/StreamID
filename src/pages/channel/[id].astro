---
import { getChannels } from '../../data/channels.js';
import MainLayout from '../../layouts/MainLayout.astro';
import WatchContainer from '../../components/WatchContainer.jsx';

const { id } = Astro.params;
const allChannels = await getChannels();
const channel = allChannels.find(c => c.id === id);

if (!channel) {
  return Astro.redirect('/tv');
}
---

<MainLayout title={channel.name}>
	<WatchContainer initialChannel={channel} allChannels={allChannels} client:load />
</MainLayout>
